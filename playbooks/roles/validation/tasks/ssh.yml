---
- block:
    - name: "Stat the Streisand SSH public key, {{ streisand_ssh_public_key }}"
      stat:
        path: "{{ streisand_ssh_public_key }}"
      register: streisand_ssh_key_status
      changed_when: False
    - name: "Fail if the Streisand SSH public key file doesn't exist"
      fail:
        msg: "The Streisand SSH public key \"{{ streisand_ssh_public_key }}\" does not exist."
      when: streisand_ssh_key_status.stat.exists == False
    - name: "Register the Streisand SSH public key"
      command: "cat {{ streisand_ssh_public_key }}"
      register: streisand_ssh_key
      changed_when: False

  rescue:
    - fail:
        msg: "XXX nop Ensure you specified an existing SSH public key file.\n Try using `ssh-keygen -f {{ streisand_ssh_public_key }} to generate your key if it does not exist\n"
